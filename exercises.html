<!DOCTYPE html>

<html lang="it">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>I 30 Esercizi di SynapSenseS</title>
<style>
    :root {
      --train:        #8e44ad;
      --white:        #fff;
      --bg:           #f0f2f5;
      --overlay:      rgba(0,0,0,0.7);
      --radius:       8px;
      --spacing:      1rem;
      --font:         'Inter', Arial, sans-serif;
      --card-bg:      #fff;
      --card-shadow:  rgba(0,0,0,0.1);
      --audio-bg:     #d32f2f;
    }
    * { box-sizing: border-box; margin:0; padding:0 }
    body {
      font-family: var(--font);
      background: var(--bg);
      color: #333;
      display:flex; flex-direction:column; min-height:100vh;
    }
    /* player audio nascosto */
    audio { display:none; }
    /* header con audio e close */
    header {
      display:grid;
      grid-template-columns:auto 1fr auto;
      align-items:center;
      background:var(--train);
      padding:var(--spacing);
    }
    #audioBtn, #closeBtn {
      background:var(--audio-bg);
      color:var(--white);
      border:none;
      padding:.5rem;
      border-radius:50%;
      cursor:pointer;
      font-size:1.2rem;
      transition:transform .2s;
    }
    #audioBtn:hover, #closeBtn:hover { transform:scale(1.1); }
    #closeBtn { background:#b71c1c; }
    header h1 {
      margin:0; text-align:center;
      color:var(--white);
      font-size:1.5rem;
      font-weight:600;
    }
    main { padding:var(--spacing); flex:1; }
    .intro-box {
      background:var(--card-bg);
      border-radius:var(--radius);
      box-shadow:0 2px 6px var(--card-shadow);
      padding:var(--spacing);
      margin-bottom:var(--spacing);
      text-align:center;
      line-height:1.5;
    }
    .intro-box h2 { color:var(--train); margin-bottom:.5rem; }
    .intro-box ol {
      margin:1rem auto; text-align:left;
      max-width:400px;
      padding-left:1.2rem;
    }
    .intro-box a.home {
      display:inline-block;
      margin-top:var(--spacing);
      background:var(--train);
      color:var(--white);
      padding:.6rem 1rem;
      border-radius:var(--radius);
      text-decoration:none;
      font-weight:600;
      transition:background .2s;
    }
    .intro-box a.home:hover { background:#732d91; }

    .grid {
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      gap:var(--spacing);
    }
    .card {
      background:var(--card-bg);
      border-radius:var(--radius);
      box-shadow:0 2px 6px var(--card-shadow);
      overflow:hidden;
      cursor:pointer;
      position:relative;
      transition:transform .2s;
    }
    .card:hover { transform:scale(1.03); }
    .card img {
      width:100%; height:140px; object-fit:cover;
    }
    .card h3 {
      padding:.5rem; text-align:center; font-size:1.1rem;
    }

    /* dettaglio overlay */
    .detail {
      background:var(--overlay);
      position:fixed; top:0; left:0; right:0; bottom:0;
      overflow-y:auto; padding:2rem; z-index:10;
    }
    .detail-content {
      background:var(--card-bg);
      color:#000;
      border-radius:var(--radius);
      max-width:600px; margin:auto;
      padding:var(--spacing); line-height:1.5;
    }
    .detail-content h1 { margin-top:0; color:var(--train); }
    .detail-content h2 { margin-top:1rem; color:var(--train); }
    .detail-content ol, .detail-content ul { margin-left:1.5rem; }
    .detail-content .actions {
      margin-top:var(--spacing);
      display:flex; gap:var(--spacing);
      justify-content:flex-end; flex-wrap:wrap;
    }
    .detail-content .actions a {
      background:var(--train);
      color:var(--white);
      padding:.6rem 1rem;
      border-radius:var(--radius);
      text-decoration:none;
      font-weight:600;
      transition:background .2s;
    }
    .detail-content .actions a:hover { background:#732d91; }

    @media(max-width:480px){
      .intro-box ol { font-size:.9rem; }
      .detail-content { padding:.8rem; }
      header { grid-template-columns:auto auto auto; }
    }

    /* ripple */
    .ripple {
      position:absolute; border-radius:50%;
      background:rgba(255,255,255,0.4);
      transform:scale(0); animation:ripple .6s linear;
      pointer-events:none;
    }
    @keyframes ripple { to{transform:scale(4);opacity:0;} }
  </style>
</head>
<body><audio id="bg-audio" loop="" preload="auto" src="audio/nr1.mp3"></audio>
<header>
<button id="audioBtn">üîä</button>
<h1>Training Autogeno</h1>
<button id="closeBtn">‚úï</button>
</header>
<div class="loader" id="loader">Caricamento‚Ä¶</div>
<div class="grid" id="grid" style="display:none;"></div>
<script>
    const exercises = [
      {
        id: 1,
        title: "Respira profondo",
        image: "1.jpeg",
        description: "Questo esercizio insegna a usare il diaframma per respirare in profondit√†, favorendo il rilassamento immediato e abbassando i livelli di cortisolo.",
        objective: "Calmare mente e corpo riducendo lo stress.",
        steps: [
          "Siediti comodamente o sdraiati supino, gambe leggermente divaricate.",
          "Posiziona una mano sul petto e una sull‚Äôaddome per seguire il movimento.",
          "Inspira dal naso contando 4 secondi, concentrandoti sull‚Äôespansione del diaframma.",
          "Trattieni per 2 secondi senza irrigidire le spalle.",
          "Espira lentamente in 6 secondi dalla bocca, svuotando completamente i polmoni.",
          "Ripeti per 10-15 cicli, riportando l‚Äôattenzione al respiro ogni volta che la mente vaga."
        ],
        suggestions: [
          "Pratica al mattino per iniziare la giornata in modo calmo.",
          "Registra il tuo respiro usando un‚Äôapp di biofeedback per osservare i progressi."
        ]
      },
      {
        id: 2,
        title: "Tecnica dei 5 secondi",
        image: "2.jpeg",
        description: "Rompi il ciclo della procrastinazione contando rapidamente da 5 a 1 e avviando immediatamente l‚Äôazione, sfruttando l‚Äôimpulso per superare l‚Äôinerzia.",
        objective: "Superare l‚Äôinerzia e iniziare subito compiti rimandati.",
        steps: [
          "Al primo impulso di rimandare, inizia a contare mentalmente: 5-4-3-2-1.",
          "Allo ‚Äú1‚Äù, avvia subito il compito senza pensarci ulteriormente.",
          "Mantieni l‚Äôazione per almeno 20 secondi prima di valutare il prossimo passo."
        ],
        suggestions: [
          "Annota ogni successo in un diario per mantenere alta la motivazione.",
          "Usa questa tecnica anche per alzarti dal letto al mattino."
        ]
      },
      {
        id: 3,
        title: "Focus su un obiettivo",
        image: "3.jpeg",
        description: "Utilizza la visualizzazione per rendere concreto un tuo obiettivo: rafforza la motivazione e la chiarezza.",
        objective: "Aumentare chiarezza mentale e motivazione verso uno scopo.",
        steps: [
          "Scrivi un obiettivo specifico, misurabile e a breve termine.",
          "Imposta un timer di 2 minuti e chiudi gli occhi.",
          "Visualizza i passi necessari: cosa fai, dove sei, come ti senti.",
          "Concludi con una frase motivazionale ad alta voce."
        ],
        suggestions: [
          "Usa colori o simboli sul foglio per renderlo pi√π impattante.",
          "Ripeti questa visualizzazione ogni mattina per consolidare l‚Äôabitudine."
        ]
      },
      {
        id: 4,
        title: "Visualizza il tuo successo",
        image: "4.jpeg",
        description: "Mettiti nella condizione di vivere l‚Äôesito positivo di un traguardo, usando i sensi: vista, udito ed emozioni.",
        objective: "Rafforzare fiducia e determinazione con l‚Äôimmaginazione.",
        steps: [
          "Siediti comodo, chiudi gli occhi e rilassa ogni muscolo.",
          "Immagina di aver gi√† raggiunto il traguardo desiderato.",
          "Dettaglia: cosa vedi, senti, quali emozioni attraversi.",
          "Mantieni la scena per 1-2 minuti prima di aprire gli occhi."
        ],
        suggestions: [
          "Registra la voce mentre guidi la visualizzazione per poterla riascoltare.",
          "Aggiungi musica di sottofondo che evochi positivit√†."
        ]
      },
      {
        id: 5,
        title: "Silenzia il giudizio interiore",
        image: "5.jpeg",
        description: "Trasforma quei pensieri critici in affermazioni positive che rinforzano l‚Äôautostima.",
        objective: "Sostituire pensieri negativi con affermazioni positive.",
        steps: [
          "Tieni un diario a portata di mano durante la giornata.",
          "Quando compare un pensiero critico, annotalo in una frase breve.",
          "Riscrivi lo stesso pensiero in forma positiva.",
          "Ripeti l‚Äôaffermazione ad alta voce 3 volte quando emergono dubbi."
        ],
        suggestions: [
          "Rileggi le affermazioni ogni sera prima di dormire.",
          "Abbina ogni affermazione a un‚Äôimmagine rilassante."
        ]
      },
      {
        id: 6,
        title: "La regola dei 20 minuti",
        image: "6.jpeg",
        description: "Impegnati a lavorare senza distrazioni per almeno 20 minuti: spesso √® sufficiente per superare la pigrizia iniziale.",
        objective: "Superare la resistenza iniziale avviando attivit√† difficili.",
        steps: [
          "Scegli un compito specifico da completare.",
          "Imposta un timer per 20 minuti.",
          "Lavora ininterrottamente fino allo scadere.",
          "Al termine, valuta se continuare o fare una pausa."
        ],
        suggestions: [
          "Elimina distrazioni: metti il telefono in modalit√† aereo.",
          "Prepara in anticipo tutto il materiale necessario."
        ]
      },
      {
        id: 7,
        title: "Potenzia la memoria",
        image: "7.jpeg",
        description: "Allena la memoria di lavoro con brevi serie di parole o numeri, aumentando progressivamente la difficolt√†.",
        objective: "Allenare la memoria di lavoro e migliorare concentrazione.",
        steps: [
          "Scrivi 5 parole su un foglio e studiale per 30 secondi.",
          "Copri il foglio e dopo 1 minuto prova a riscrivere le parole in ordine.",
          "Aggiungi 1-2 parole ogni sessione fino a 7-8 elementi."
        ],
        suggestions: [
          "Utilizza immagini mentali per associare ogni parola.",
          "Pronuncia mentalmente ogni parola mentre la studi."
        ]
      },
      {
        id: 8,
        title: "Rilassamento muscolare progressivo",
        image: "8.jpeg",
        description: "Contrarre e rilasciare i vari gruppi muscolari aiuta a individuare e sciogliere le tensioni accumulate.",
        objective: "Ridurre tensioni fisiche e mentali con contrazione e rilascio muscolare.",
        steps: [
          "Sdraiati o siediti con schiena dritta.",
          "Contrai i muscoli dei piedi per 5s, poi rilassa per 10s.",
          "Procedi risalendo: gambe, addome, braccia, spalle, collo, volto.",
          "Respira lentamente e mantieni il rilascio altri 5-10s."
        ],
        suggestions: [
          "Esegui in un luogo silenzioso.",
          "Usa cuffie con suoni binaurali per aumentare l‚Äôefficacia."
        ]
      },
      {
        id: 9,
        title: "Gratitudine scritta",
        image: "9.jpeg",
        description: "Annotare per cui sei grato sposta l‚Äôattenzione sul positivo, incrementando il benessere mentale.",
        objective: "Incrementare il benessere focalizzandosi su aspetti positivi.",
        steps: [
          "Alla sera scegli 3 cose per cui sei grato.",
          "Scrivi perch√© ogni elemento √® significativo.",
          "Rileggi le note prima di addormentarti."
        ],
        suggestions: [
          "Includi dettagli sensoriali per rendere pi√π vivo il ricordo.",
          "Tieni un diario dedicato con copertina colorata."
        ]
      },
      {
        id: 10,
        title: "Il potere delle affermazioni positive",
        image: "10.jpeg",
        description: "Ripetere frasi motivazionali davanti allo specchio rinforza l‚Äôautostima e crea un‚Äôabitudine mentale proattiva.",
        objective: "Rafforzare autostima e mindset proattivo.",
        steps: [
          "Scegli un‚Äôaffermazione breve (es. ‚ÄúMerito il meglio‚Äù).",
          "Posizionati davanti allo specchio e guardati negli occhi.",
          "Ripetila ad alta voce per 2 minuti."
        ],
        suggestions: [
          "Registra la tua voce per riascoltarla in momenti difficili.",
          "Aggiungi un gesto simbolico (es. pugno chiuso)."
        ]
      },
      {
        id: 11,
        title: "Leggi una pagina oggi",
        image: "11.jpeg",
        description: "La lettura di una sola pagina aiuta a rompere la routine digitale e stimola la concentrazione e la creativit√†.",
        objective: "Stimolare concentrazione e creativit√† attraverso la lettura.",
        steps: [
          "Prendi un libro cartaceo e leggi con calma una pagina.",
          "Sottolinea una frase significativa.",
          "Annota brevemente una riflessione."
        ],
        suggestions: [
          "Varia genere per ampliare orizzonti.",
          "Leggi in un luogo confortevole e illuminato."
        ]
      },
      {
        id: 12,
        title: "Tecnica Pomodoro: 25 minuti di focus",
        image: "12.jpeg",
        description: "Alternare fasi di lavoro intense a brevi pause ottimizza energia e creativit√†, riducendo il burnout.",
        objective: "Migliorare produttivit√† e gestione del tempo in sessioni brevi.",
        steps: [
          "Imposta un timer a 25 minuti e concentrati su un solo compito.",
          "Al termine, fai 5 minuti di pausa attiva (camminata, stretching).",
          "Dopo 4 cicli, concediti 15-30 minuti di pausa lunga."
        ],
        suggestions: [
          "Annota le distrazioni per gestirle meglio nel prossimo ciclo.",
          "Usa timer fisico o app dedicate per mantenere il ritmo."
        ]
      },
      {
        id: 13,
        title: "Lascia andare il superfluo",
        image: "13.jpeg",
        description: "Eliminare ci√≤ che non serve libera spazio mentale e aumenta la sensazione di leggerezza.",
        objective: "Liberare spazio mentale e fisico eliminando ci√≤ che non serve.",
        steps: [
          "Identifica un oggetto, un‚Äôabitudine o un pensiero superfluo.",
          "Decidi di liberartene concretamente (donarlo, cancellarlo) o mentalmente.",
          "Festeggia il rilascio con un piccolo gesto simbolico."
        ],
        suggestions: [
          "Inizia da oggetti piccoli per non sentirti sopraffatto.",
          "Scrivi i benefici che percepisci dopo ogni rilascio."
        ]
      },
      {
        id: 14,
        title: "Reset mentale: 3 respiri e 1 sorriso",
        image: "14.jpeg",
        description: "Pochi secondi per fermare il rumore mentale e riportare leggerezza con un semplice sorriso.",
        objective: "Ridurre lo stress e ricaricare a breve respiro.",
        steps: [
          "Interrompi l‚Äôattivit√†, chiudi gli occhi e inspira profondamente 3 volte.",
          "Poi sorridi spontaneamente per almeno 5 secondi.",
          "Apri gli occhi e riprendi con energia."
        ],
        suggestions: [
          "Associa il gesto a un promemoria visivo sulla scrivania.",
          "Ripeti ogni volta che senti tensione."
        ]
      },
      {
        id: 15,
        title: "Mini meditazione guidata",
        image: "15.jpeg",
        description: "Una breve sessione guidata di 3-5 minuti per calmare la mente, ideale anche in spazi ristretti.",
        objective: "Calmare la mente e aumentare la presenza in 3-5 minuti.",
        steps: [
          "Apri un‚Äôapp o un video di meditazione breve.",
          "Siediti con schiena dritta e indossa cuffie isolanti.",
          "Segui le istruzioni vocali concentrandoti sul respiro."
        ],
        suggestions: [
          "Scegli un momento di tranquillit√†, lontano da notifiche.",
          "Annota sensazioni e immagini emerse al termine."
        ]
      },
      {
        id: 16,
        title: "Sprint di chiarezza",
        image: "16.jpeg",
        description: "Due minuti di scrittura libera per svuotare la mente e mettere a fuoco priorit√† e preoccupazioni.",
        objective: "Ordina i pensieri in 2 minuti di writing.",
        steps: [
          "Prendi carta e penna, imposta un timer di 2 minuti.",
          "Scrivi tutto ci√≤ che ti passa per la mente senza fermarti.",
          "Rileggi e identifica 2-3 temi ricorrenti."
        ],
        suggestions: [
          "Non correggere n√© giudicare mentre scrivi.",
          "Conserva il testo per rileggere i progressi."
        ]
      },
      {
        id: 17,
        title: "Pensiero positivo al risveglio",
        image: "17.jpeg",
        description: "Avvia la giornata concentrandoti su un evento felice: il primo pensiero pu√≤ influenzare il tono dell‚Äôintera giornata.",
        objective: "Partire con mindset propositivo fin dal mattino.",
        steps: [
          "Prima di alzarti, pensa a un momento positivo.",
          "Ripeti mentalmente un‚Äôaffermazione di gratitudine 3 volte.",
          "Alzati con calma portando con te quel pensiero."
        ],
        suggestions: [
          "Tieni un post-it sul comodino con l‚Äôaffermazione.",
          "Abbina al risveglio un leggero stretching."
        ]
      },
      {
        id: 18,
        title: "Evita multitasking",
        image: "18.jpeg",
        description: "Concentrarsi su un solo compito alla volta migliora qualit√† e velocit√†, riducendo il senso di sopraffazione.",
        objective: "Focus su un solo compito per 60 minuti.",
        steps: [
          "Scegli l‚Äôattivit√† prioritaria e definisci un tempo (es. 60‚Ä≤).",
          "Silenzia notifiche e chiudi schede non necessarie.",
          "Lavora senza cambiare focus fino allo scadere del tempo."
        ],
        suggestions: [
          "Annota le interruzioni per ridurle in futuro.",
          "Usa timer Pomodoro per gestire le pause."
        ]
      },
      {
        id: 19,
        title: "Torna nel presente: cosa senti ora?",
        image: "19.jpeg",
        description: "Un check-in rapido di 30 secondi per ricollegarti alle sensazioni corporee e al qui-ed-ora.",
        objective: "Ricollegarsi al corpo in 30 secondi.",
        steps: [
          "Chiudi gli occhi per 30 secondi.",
          "Porta attenzione a piedi, respiro e eventuali tensioni.",
          "Apri gli occhi e prendi nota di una parola-chiave."
        ],
        suggestions: [
          "Ripeti ogni volta che ti senti distratto o stressato.",
          "Associa il gesto a un piccolo suono di campanello."
        ]
      },
      {
        id: 20,
        title: "Ascolto profondo",
        image: "20.jpeg",
        description: "Migliora l‚Äôempatia e la comprensione ascoltando con attenzione senza formulare subito la risposta.",
        objective: "Migliorare empatia e comprensione.",
        steps: [
          "Mantieni contatto visivo con l‚Äôinterlocutore.",
          "Ascolta senza interrompere, concentrandoti solo sulle sue parole.",
          "Riformula ci√≤ che hai capito prima di rispondere."
        ],
        suggestions: [
          "Evita di pensare subito alla replica.",
          "Resume mentalmente i punti chiave."
        ]
      },
      {
        id: 21,
        title: "Scrivi un'intenzione",
        image: "21.jpeg",
        description: "Definisci un focus concreto per la giornata, migliorando la produttivit√† e il senso di scopo.",
        objective: "Definire un focus per la giornata.",
        steps: [
          "Scrivi una frase positiva concreta (es. ‚ÄúOggi porto a termine X‚Äù).",
          "Tieni l‚Äôintenzione visibile su un post-it o sfondo telefono.",
          "Rileggila durante le pause."
        ],
        suggestions: [
          "Usa colori vivaci sul foglio.",
          "Abbina l‚Äôintenzione a un piccolo gesto quotidiano."
        ]
      },
      {
        id: 22,
        title: "Pausa digitale",
        image: "22.jpeg",
        description: "Staccare dagli schermi per almeno 15 minuti riduce l‚Äôaffaticamento mentale e visivo.",
        objective: "Staccare dagli schermi per 15 minuti.",
        steps: [
          "Spegni smartphone e disattiva notifiche.",
          "Cammina lentamente o osserva un panorama.",
          "Fai 5 respirazioni profonde."
        ],
        suggestions: [
          "Programma la pausa dopo sessioni di lavoro.",
          "Usa un timer silenzioso per non controllare il telefono."
        ]
      },
      {
        id: 23,
        title: "Sorridi consapevolmente",
        image: "23.jpeg",
        description: "Un sorriso prolungato stimola i centri di benessere cerebrale anche se all‚Äôinizio forzato.",
        objective: "Stimolare benessere emotivo col sorriso.",
        steps: [
          "Siediti rilassato e sorri lentamente per 60 secondi.",
          "Fai attenzione alle sensazioni corporee associate.",
          "Ripeti ogni volta che senti tensione."
        ],
        suggestions: [
          "Ascolta musica allegra mentre sorridi.",
          "Combina con un piccolo movimento di danza."
        ]
      },
      {
        id: 24,
        title: "Camminata lenta",
        image: "24.jpeg",
        description: "Camminare lentamente con attenzione ad ogni passo migliora la presenza mentale e la connessione con il corpo.",
        objective: "Presenza mentale in movimento.",
        steps: [
          "Cammina lentamente per 5 minuti in un luogo tranquillo.",
          "Concentrati su ogni contatto del piede con il suolo.",
          "Osserva il respiro sincronizzato con i passi."
        ],
        suggestions: [
          "Scegli un percorso verde o naturale.",
          "Indossa scarpe comode e respirare a ritmo lento."
        ]
      },
      {
        id: 25,
        title: "Pausa occhi",
        image: "25.jpeg",
        description: "Prevenire l‚Äôaffaticamento visivo alternando la messa a fuoco tra vicino e lontano.",
        objective: "Prevenire affaticamento visivo.",
        steps: [
          "Ogni 20 minuti guarda un punto a 6 metri per 20 secondi.",
          "Oppure chiudi gli occhi e rilassa le palpebre per 10 secondi."
        ],
        suggestions: [
          "Inclina leggermente la testa verso l‚Äôalto.",
          "Integra questa pausa in un ciclo Pomodoro."
        ]
      },
      {
        id: 26,
        title: "Domanda potenziante",
        image: "26.jpeg",
        description: "Usa domande costruttive per sbloccare la creativit√† e trovare la prossima piccola azione da compiere.",
        objective: "Sbloccare creativit√† con domande potenti.",
        steps: [
          "Poni la domanda: ‚ÄúQual √® il piccolo passo successivo ora?‚Äù",
          "Scrivi 3 possibili risposte brevi.",
          "Scegli la migliore e agisci subito."
        ],
        suggestions: [
          "Mantieni un quaderno per queste domande.",
          "Rivedile settimanalmente per monitorare progressi."
        ]
      },
      {
        id: 27,
        title: "Stretching veloce",
        image: "27.jpeg",
        description: "Semplici movimenti di allungamento per sciogliere tensioni accumulate, anche durante una giornata di lavoro sedentaria.",
        objective: "Sciogliere tensioni muscolari in pochi minuti.",
        steps: [
          "Alzati e solleva le braccia verso il soffitto.",
          "Piega il busto a destra e a sinistra mantenendo 10 secondi.",
          "Ruota delicatamente spalle e collo per 10 secondi."
        ],
        suggestions: [
          "Respira profondamente durante ogni allungamento.",
          "Esegui questi movimenti ogni ora."
        ]
      },
      {
        id: 28,
        title: "Osserva il respiro",
        image: "28.jpeg",
        description: "Un minuto di attenzione al respiro spontaneo per aumentare consapevolezza e ridurre il dialogo mentale.",
        objective: "Accrescere consapevolezza con il respiro.",
        steps: [
          "Siediti in silenzio per 1 minuto.",
          "Osserva il respiro senza cercare di modificarlo.",
          "Nota ritmo, profondit√† e durata di ogni ciclo."
        ],
        suggestions: [
          "Usa un timer silenzioso da 60 secondi.",
          "Abbina un breve mantra mentale se aiuta la concentrazione."
        ]
      },
      {
        id: 29,
        title: "Visualizza gratitudine",
        image: "29.jpeg",
        description: "Porta alla mente un momento di gratitudine, rivivendone dettagli e sensazioni positive.",
        objective: "EvoCare emozioni positive attraverso la gratitudine.",
        steps: [
          "Chiudi gli occhi e pensa a un ricordo gratificante.",
          "Visualizza i dettagli sensoriali: suoni, odori, colori.",
          "Mantieni la scena per 1 minuto."
        ],
        suggestions: [
          "Scrivi subito dopo le emozioni provate.",
          "Ripeti prima di addormentarti."
        ]
      },
      {
        id: 30,
        title: "Celebra ogni piccolo traguardo",
        image: "30.jpeg",
        description: "Riconoscere e celebrare i piccoli successi rinforza la motivazione e genera un circolo virtuoso.",
        objective: "Rafforzare motivazione riconoscendo successi quotidiani.",
        steps: [
          "Identifica un piccolo risultato ottenuto oggi.",
          "Scrivilo su un diario e festeggia con un gesto (es. applauso)."
        ],
        suggestions: [
          "Condividi il risultato con una persona cara.",
          "Mantieni un diario dei successi per rileggere i progressi."
        ]
      }
    ];

    const grid   = document.getElementById("grid"),
          loader = document.getElementById("loader");

    function openExercisePage(ex) {
      const detail = `
<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>${ex.id} ‚Äì ${ex.title}</title>
  <style>
    body { margin:0; padding:0; font-family:Arial,sans-serif; background:url('images/${ex.image}') no-repeat center center fixed; background-size:cover; color:#fff; text-shadow:1px 1px 4px #000; }
    .overlay { background:rgba(0,0,0,0.7); padding:2rem; min-height:100vh; }
    h1 { margin:0 0 1rem; font-size:2rem; color:#fff; }
    .description { background:#fff; padding:1rem; border-radius:8px; margin-top:1rem; }
    .description h2 { color:#8e44ad; margin-top:1rem; }
    .description p, .description li { color:#000; }
    .description ol, .description ul { margin-left:1.5rem; }
    a.button { display:inline-block; margin:1rem 0; background:#8e44ad; color:#fff; padding:0.7rem 1.5rem; border-radius:8px; text-decoration:none; }
  </style>
</head>
<body>
  <div class="overlay">
    <h1>${ex.id} ‚Äì ${ex.title}</h1>
    <div class="description">
      <h2>Descrizione</h2>
      <p>${ex.description}</p>
      <h2>Obiettivo</h2>
      <p>${ex.objective}</p>
      <h2>Procedura passo-passo</h2>
      <ol>${ex.steps.map(s=>`<li>${s}</li>`).join("")}</ol>
      <h2>Suggerimenti</h2>
      <ul>${ex.suggestions.map(t=>`<li>${t}</li>`).join("")}</ul>
      <p style="font-style:italic;margin-top:1rem;">In caso di dubbi, <a href="chat.html?exercise=${ex.id}">apri la chat AI</a>.</p>
    </div>
    <a class="button" href="index.html">‚Üê Torna alla Home</a>
  </div>
</body>
</html>`;
      document.documentElement.innerHTML = detail;
    }

    function renderGrid() {
      loader.style.display = "none";
      grid.style.display   = "grid";
      exercises.forEach(ex => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML =
          `<img src="images/${ex.image}" alt="${ex.title}">
           <h3>${ex.id} ‚Äì <strong>${ex.title}</strong></h3>`;
        card.onclick = () => openExercisePage(ex);
        grid.appendChild(card);
      });
    }

    renderGrid();
  
document.querySelectorAll(".exercise-card").forEach(card => {
  card.addEventListener("click", () => {
    const id = card.dataset.id;
    const exercise = exercises.find(e => e.id == id);
    const overlay = document.createElement("div");
    overlay.className = "overlay-detail";
    overlay.innerHTML = `
      <div class="overlay-box">
        <h2>${exercise.title}</h2>
        <h3>Obiettivo</h3>
        <p>${exercise.objective}</p>
        <h3>Procedura</h3>
        <ol>${exercise.steps.map(s => `<li>${s}</li>`).join('')}</ol>
        <h3>Consigli</h3>
        <ul>${exercise.tips.map(s => `<li>${s}</li>`).join('')}</ul>
        <div class="actions">
          <a href="chat.html">Chat AI</a>
          <a href="#" class="close">Chiudi</a>
        </div>
      </div>
    `;
    overlay.querySelector(".close").onclick = e => {
      e.preventDefault();
      overlay.remove();
    };
    document.body.appendChild(overlay);
  });
});
</script>
<script>
    // AUDIO + CLOSE HANDLER
    const audio    = document.getElementById('bg-audio');
    const audioBtn = document.getElementById('audioBtn');
    const closeBtn = document.getElementById('closeBtn');
    const kickstart = () => {
      audio.play().catch(()=>{});
      document.removeEventListener('click', kickstart);
      document.removeEventListener('touchstart', kickstart);
    };
    document.addEventListener('click', kickstart);
    document.addEventListener('touchstart', kickstart);
    audioBtn.addEventListener('click', ()=>{
      if(audio.paused){ audio.play(); audioBtn.textContent='üîá'; }
      else         { audio.pause(); audioBtn.textContent='üîä'; }
    });
    closeBtn.addEventListener('click', ()=>{
      window.close();
      alert("Chiudi manualmente la scheda, per favore.");
    });

    // ESERCIZI DATA
    const exercises = [
      { id:1, title:"Esercizio della pesantezza", img:"images/training/1.jpg",
        objective:"Favorire il rilassamento muscolare lasciando andare il peso degli arti.",
        steps:[
          "Siediti in posizione comoda, schiena dritta.",
          "Chiudi gli occhi e respira lentamente.",
          "Ripeti mentalmente ‚Äúle mie braccia e gambe sono pesanti‚Äù per 1‚Äì2 minuti.",
          "Concentrati sulla sensazione di gravit√† che ti radica al suolo."
        ],
        tips:[
          "Metti una mano su un braccio per percepirne il peso.",
          "Esegui in un ambiente silenzioso."
        ]
      },
      { id:2, title:"Esercizio del calore", img:"images/training/2.jpg",
        objective:"Indurre vasodilatazione mentale e sensazione di tepore.",
        steps:[
          "Mantieni gli occhi chiusi e rilassati.",
          "Visualizza un calore che sale dai piedi fino alla sommit√† del capo.",
          "Ripeti ‚Äúsento un piacevole calore in tutto il corpo‚Äù per 1‚Äì2 minuti."
        ],
        tips:[
          "Associa la formula a un‚Äôimmagine (es. un tramonto dorato).",
          "Respira in modo uniforme."
        ]
      },
      { id:3, title:"Esercizio del cuore", img:"images/training/3.jpg",
        objective:"Sincronizzarsi con il ritmo naturale del proprio cuore.",
        steps:[
          "Appoggia una mano sul petto, in corrispondenza del cuore.",
          "Ascolta il battito senza modificarlo.",
          "Ripeti ‚Äúil mio cuore batte calmo e regolare‚Äù per 1‚Äì2 minuti."
        ],
        tips:[
          "Stenditi se possibile per maggiore comodit√†.",
          "Non forzare il ritmo, sii un osservatore."
        ]
      },
      { id:4, title:"Esercizio del respiro", img:"images/training/4.jpg",
        objective:"Rendere consapevole e profondo il respiro spontaneo.",
        steps:[
          "Lascia che il respiro fluisca naturalmente.",
          "Ripeti ‚Äúil mio respiro √® lento e profondo‚Äù per 1‚Äì2 minuti.",
          "Segui mentalmente il flusso dell‚Äôaria."
        ],
        tips:[
          "Metti le mani sul ventre per sentire il gonfiarsi addominale.",
          "Riporta l‚Äôattenzione sulla formula se ti distrai."
        ]
      },
      { id:5, title:"Esercizio del plesso solare", img:"images/training/5.jpg",
        objective:"Concentrare energia e calore nell‚Äôarea addominale.",
        steps:[
          "Dirigi la consapevolezza all‚Äôaddome.",
          "Ripeti ‚Äúsento un piacevole calore al plesso solare‚Äù per 1‚Äì2 minuti.",
          "Immagina una luce dorata che scalda l‚Äôaddome."
        ],
        tips:[
          "Mantieni la colonna rilassata.",
          "Visualizza la luce in movimento."
        ]
      },
      { id:6, title:"Esercizio della fronte fresca", img:"images/training/6.jpg",
        objective:"Rinfrescare la mente e ridurre tensioni della fronte.",
        steps:[
          "Immagina una brezza fresca sulla fronte.",
          "Ripeti ‚Äúla mia fronte √® fresca e leggera‚Äù per 1‚Äì2 minuti.",
          "Senti la tensione sciogliersi."
        ],
        tips:[
          "Puoi usare un fazzoletto fresco per intensificare la sensazione.",
          "Mantieni lo sguardo morbido."
        ]
      }
    ];

    // POPOLA GRID & DETAIL
    const grid = document.getElementById('grid');
    exercises.forEach(ex => {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <img src="${ex.img}" alt="${ex.title}">
        <h3>${ex.title}</h3>
      `;
      card.onclick = e => {
        // ripple
        const c = document.createElement('span');
        const d = Math.max(card.clientWidth,card.clientHeight);
        c.style.width=c.style.height=d+'px';
        const r=card.getBoundingClientRect();
        c.style.left=e.clientX-r.left-d/2+'px';
        c.style.top=e.clientY-r.top-d/2+'px';
        c.className='ripple';
        card.append(c);
        setTimeout(()=>c.remove(),600);
        // detail
        showDetail(ex);
      };
      grid.appendChild(card);
    });

    function showDetail(ex) {
      const overlay = document.createElement('div');
      overlay.className = 'detail';
      overlay.innerHTML = `
        <div class="detail-content">
          <h1>${ex.title}</h1>
          <h2>Obiettivo</h2><p>${ex.objective}</p>
          <h2>Procedura</h2><ol>${ex.steps.map(s=>`<li>${s}</li>`).join('')}</ol>
          <h2>Consigli</h2><ul>${ex.tips.map(t=>`<li>${t}</li>`).join('')}</ul>
          <div class="actions">
            <a href="chat.html">In caso di dubbi apri Chat AI</a>
            <a href="#" class="close">Chiudi</a>
          </div>
        </div>
      `;
      overlay.querySelector('.close').onclick = e => {
        e.preventDefault();
        overlay.remove();
      };
      document.body.appendChild(overlay);
    }
  

    // AUDIO HANDLER
    const audio    = document.getElementById('bg-audio');
    const audioBtn = document.getElementById('audioBtn');
    const closeBtn = document.getElementById('closeBtn');
    const kickstart = ()=> {
      audio.play().catch(()=>{});
      document.removeEventListener('click', kickstart);
      document.removeEventListener('touchstart', kickstart);
    };
    document.addEventListener('click', kickstart);
    document.addEventListener('touchstart', kickstart);
    audioBtn.addEventListener('click', ()=>{
      if(audio.paused){ audio.play(); audioBtn.textContent='üîá'; }
      else         { audio.pause(); audioBtn.textContent='üîä'; }
    });
    closeBtn.addEventListener('click', ()=>{
      window.close();
      alert("Chiudi manualmente la scheda, per favore.");
    });

    // CHAT LOGIC
    const WORKER_URL    = 'https://synapsense-agent.ilpetti1897.workers.dev';
    const modeRadios    = [...document.querySelectorAll('input[name="mode"]')];
    const exSelect      = document.getElementById('exerciseSelect');
    const autoSelect    = document.getElementById('autogenoSelect');
    const ipnoSelect    = document.getElementById('autoipnosiSelect');
    const messageInput  = document.getElementById('messageInput');
    const sendBtn       = document.getElementById('sendBtn');
    const chatBox       = document.getElementById('chatBox');
    let history         = [];

    fetch(WORKER_URL + '/exercises')
      .then(r => r.json())
      .then(exs => {
        exSelect.innerHTML = exs.map(e =>
          `<option value="${e.id}">${e.id} ‚Äì ${e.titolo}</option>`
        ).join('');
      });

    function resetChat() {
      history = [];
      chatBox.innerHTML = '<p>Scegli tra Chat libera, Consigli sui 30 esercizi, Training Autogeno o Autoipnosi Regressiva</p>';
      messageInput.value = '';
    }

    function updateMode() {
      const mode = document.querySelector('input[name="mode"]:checked').value;
      exSelect.style.display   = mode==='exercise'   ? 'block':'none';
      autoSelect.style.display = mode==='autogeno'    ? 'block':'none';
      ipnoSelect.style.display = mode==='autoipnosi'  ? 'block':'none';
      messageInput.placeholder = 
        mode==='exercise'   ? "Scrivi qui il tuo dubbio sull‚Äôesercizio‚Ä¶" :
        mode==='autogeno'   ? "Scrivi qui il tuo dubbio sul Training Autogeno‚Ä¶" :
        mode==='autoipnosi' ? "Scrivi qui il tuo dubbio sull‚ÄôAutoipnosi‚Ä¶" :
                              "Scrivi qui il tuo messaggio‚Ä¶";
      resetChat();
    }

    modeRadios.forEach(r=>r.addEventListener('change', updateMode));
    exSelect .addEventListener('change', resetChat);
    autoSelect.addEventListener('change', resetChat);
    ipnoSelect.addEventListener('change', resetChat);
    window.addEventListener('DOMContentLoaded', updateMode);

    sendBtn.addEventListener('click', async ()=>{
      const mode            = document.querySelector('input[name="mode"]:checked').value;
      const text            = messageInput.value.trim();
      const exerciseId      = mode==='exercise'   ? exSelect.value    : null;
      const topic           = mode==='autogeno'   ? 'autogeno' 
                          : mode==='autoipnosi'? 'autoipnosi'
                          : null;
      const autogenoStep    = mode==='autogeno'   ? autoSelect.value  : null;
      const autoStep        = mode==='autoipnosi'? ipnoSelect.value  : null;

      if(!text) return alert('Inserisci un testo da inviare.');

      chatBox.insertAdjacentHTML('beforeend',
        `<p><strong>Tu:</strong> ${text}</p>`
      );
      history.push({ role:'user', content:text });

      sendBtn.disabled = true;
      try {
        const res = await fetch(WORKER_URL+'/chat', {
          method:'POST',
          headers:{ 'Content-Type':'application/json' },
          body: JSON.stringify({ mode, exerciseId, topic, autogenoStep, autoStep, history })
        });
        const { reply, error } = await res.json();
        if(error) throw new Error(error);

        reply.split(/\r?\n{2,}/).forEach(par=>{
          const t=par.trim(); if(!t) return;
          chatBox.insertAdjacentHTML('beforeend',
            `<p><strong>AI:</strong> ${t}</p>`
          );
        });
        history.push({ role:'assistant', content:reply });
        chatBox.scrollTop = chatBox.scrollHeight;
      } catch {
        chatBox.insertAdjacentHTML('beforeend',
          `<p>Errore di connessione. Riprova pi√π tardi.</p>`
        );
      } finally {
        sendBtn.disabled = false;
        messageInput.value = '';
      }
    });
  </script></body>
</html>
